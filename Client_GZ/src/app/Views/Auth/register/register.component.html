<div class="layout-container">
	<main class="main-content">
		<div class="contenedor-formulario">
			<h1 class="kanit-bold">Registro</h1>
			<mat-card class="register-card">
				<mat-card-content>
					<form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

						<!-- Datos personales -->
						<div class="form-row">
							<!-- Nombre -->
							<mat-form-field appearance="outline">
								<mat-label>Nombres</mat-label>
								<input matInput formControlName="name" minlength="3" required>
								<mat-icon matPrefix>person</mat-icon>
								<mat-error *ngIf="shouldShowError('name')">
									{{ getErrorMessage('name') }}
								</mat-error>
							</mat-form-field>

							<!-- Apellido -->
							<mat-form-field appearance="outline">
								<mat-label>Apellidos</mat-label>
								<input matInput formControlName="lastName" minlength="3" required>
								<mat-icon matPrefix>people</mat-icon>
								<mat-error *ngIf="shouldShowError('lastName')">
									{{ getErrorMessage('lastName') }}
								</mat-error>
							</mat-form-field>
						</div>

						<div class="form-row">
							<!-- Numero de Celular -->
							<mat-form-field appearance="outline">
								<mat-label>Teléfono</mat-label>
								<input matInput formControlName="phone" appNumericInput [maxLength]="10" required>
								<mat-icon matPrefix>phone</mat-icon>
								<mat-error *ngIf="shouldShowError('phone')">
									{{ getErrorMessage('phone') }}
								</mat-error>
							</mat-form-field>

							<!-- Email -->
							<mat-form-field appearance="outline">
								<mat-label>Email</mat-label>
								<input matInput type="email" formControlName="email" required>
								<mat-icon matPrefix>email</mat-icon>
								<mat-error *ngIf="shouldShowError('email')">
									{{ getErrorMessage('email') }}
								</mat-error>
							</mat-form-field>
						</div>

						<!-- Datos de usuario -->
						<div class="form-row">
							<!-- Nombre de Usuario -->
							<mat-form-field appearance="outline">
								<mat-label>Nombre de usuario</mat-label>
								<input matInput formControlName="username" required>
								<mat-icon matPrefix>badge</mat-icon>
								<mat-error *ngIf="shouldShowError('username')">
									{{ getErrorMessage('username') }}
								</mat-error>
							</mat-form-field>

							<!-- Contraseña -->
							<mat-form-field appearance="outline">
								<mat-label>Contraseña</mat-label>
								<input matInput [type]="hidePassword ? 'password' : 'text'" formControlName="password"
									required>
								<mat-icon matPrefix>lock</mat-icon>
								<!-- Boton Ver Contraseña -->
								<button mat-icon-button matSuffix (click)="hidePassword = !hidePassword"
									[attr.aria-label]="'Mostrar contraseña'" type="button" class="btn-show-pass">
									<mat-icon>
										{{hidePassword ? 'visibility_off' : 'visibility'}}
									</mat-icon>
								</button>
								<!-- Validaciones -->
								<mat-error *ngIf="shouldShowError('password')">
									{{ getErrorMessage('password') }}
								</mat-error>
							</mat-form-field>

							<!-- Rol -->
							<mat-form-field appearance="outline">
								<mat-label>Rol</mat-label>
								<mat-select formControlName="roleId">
									<mat-option *ngFor="let role of roles" [value]="role.id">
										{{ role.name }}
									</mat-option>
								</mat-select>
								<mat-icon matPrefix>security</mat-icon>
								<mat-error *ngIf="shouldShowError('roleId')">
									{{ getErrorMessage('roleId') }}
								</mat-error>
							</mat-form-field>
						</div>

						<!-- Botones -->
						<div class="btn-registrar">
							<button mat-raised-button type="submit" [disabled]="registerForm.invalid || isSubmitting()">
								{{ isSubmitting() ? 'CREANDO CUENTA...' : 'REGISTRARSE' }}
							</button>
						</div>

						<div class="login-link">
							¿Ya eres miembro? <a routerLink="/login">Inicia sesión aquí</a>
						</div>
					</form>
				</mat-card-content>
			</mat-card>
		</div>
	</main>
</div>
